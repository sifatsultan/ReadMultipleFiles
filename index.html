<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read Multiple Files</title>
    <script>


        var reader = null;
        var count = 0
        var fileLength = 0;
        var files = [];

        function handleEvent(event) {


            if (event.type === "load") {
                console.log("Doc [", count, "] : load: ", reader.result)
                setTimeout(() => {

                }, 500);
                count++
            }

            if (event.type === "error") {
                console.log("ERROR: There is an error!!!");
            }
        }


        function addListeners(reader) {
            // reader.addEventListener("loadstart", handleEvent);
            // reader.addEventListener("load", handleEvent);
            reader.addEventListener("load", handleEvent);
            reader.addEventListener("error", handleEvent);
            // reader.addEventListener("progress", handleEvent);
            // reader.addEventListener("error", handleEvent);
            // reader.addEventListener("abort", handleEvent);
        }
        function previewFiles() {
            const preview = document.querySelector("#preview");
            files = document.querySelector("input[type=file]").files;
            readNewFile(files[count]);

        }


        function readNewFile(file) {
            if (file) {
                var reader = new FileReader();
                reader.onload = function (event) {
                    console.log("Name :", file.name, " : ", this.result);
                }
                reader.readAsDataURL(file);
                if (count == files.length) { return; }
                count++;
                readNewFile(files[count]);
            }
        }

    </script>
</head>

<body>
    <input id="browse" type="file" onchange="previewFiles()" multiple />
    <div id="preview"></div>

</body>

</html>